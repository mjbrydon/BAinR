<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Lesson 6 Gap Analysis Using t-Tests | Basic Analytics in R</title>
  <meta name="description" content="This is a brief overview of the R language as it related to my Business Analytics courses at SFU. It is meant to be a complement to doing tasks with other tools, such as Excel and SAS Enterprise Guide" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Lesson 6 Gap Analysis Using t-Tests | Basic Analytics in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a brief overview of the R language as it related to my Business Analytics courses at SFU. It is meant to be a complement to doing tasks with other tools, such as Excel and SAS Enterprise Guide" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lesson 6 Gap Analysis Using t-Tests | Basic Analytics in R" />
  
  <meta name="twitter:description" content="This is a brief overview of the R language as it related to my Business Analytics courses at SFU. It is meant to be a complement to doing tasks with other tools, such as Excel and SAS Enterprise Guide" />
  

<meta name="author" content="Michael Brydon" />


<meta name="date" content="2020-04-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="recode.html">
<link rel="next" href="categorical.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li>Basic Analytics in R</li>
<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#format-of-these-tutorials"><i class="fa fa-check"></i><b>1.1</b> Format of these tutorials</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#a-note-on-flexibility"><i class="fa fa-check"></i><b>1.2</b> A note on flexibility</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#how-to-get-started"><i class="fa fa-check"></i><b>1.3</b> How to get started</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#update-for-the-tidyverse"><i class="fa fa-check"></i><b>1.4</b> Update for the Tidyverse</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#a-note-on-python"><i class="fa fa-check"></i><b>1.5</b> A Note on Python</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Importing Data</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#preliminaries"><i class="fa fa-check"></i><b>2.1</b> Preliminaries</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#open-an-r-script-file"><i class="fa fa-check"></i><b>2.1.1</b> Open an R script file</a></li>
<li class="chapter" data-level="2.1.2" data-path="data.html"><a href="data.html#executing-code"><i class="fa fa-check"></i><b>2.1.2</b> Executing code</a></li>
<li class="chapter" data-level="2.1.3" data-path="data.html"><a href="data.html#load-the-tidyverse-package-into-r"><i class="fa fa-check"></i><b>2.1.3</b> Load the tidyverse package into R</a></li>
<li class="chapter" data-level="2.1.4" data-path="data.html"><a href="data.html#assigning-objects-to-variables"><i class="fa fa-check"></i><b>2.1.4</b> Assigning objects to variables</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#data-frames-and-tibbles"><i class="fa fa-check"></i><b>2.2</b> Data frames and tibbles</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data.html"><a href="data.html#reading-a-csv-file"><i class="fa fa-check"></i><b>2.2.1</b> Reading a CSV file</a></li>
<li class="chapter" data-level="2.2.2" data-path="data.html"><a href="data.html#reading-an-excel-file"><i class="fa fa-check"></i><b>2.2.2</b> Reading an Excel file</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#using-your-data"><i class="fa fa-check"></i><b>2.3</b> Using your data</a></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#factors-versus-character-data"><i class="fa fa-check"></i><b>2.4</b> Factors versus character data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visualize.html"><a href="visualize.html"><i class="fa fa-check"></i><b>3</b> Basic Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="visualize.html"><a href="visualize.html#preliminaries-1"><i class="fa fa-check"></i><b>3.1</b> Preliminaries</a><ul>
<li class="chapter" data-level="3.1.1" data-path="visualize.html"><a href="visualize.html#import-the-data-into-r-studio"><i class="fa fa-check"></i><b>3.1.1</b> Import the data into R Studio</a></li>
<li class="chapter" data-level="3.1.2" data-path="visualize.html"><a href="visualize.html#use-variables-to-save-typing"><i class="fa fa-check"></i><b>3.1.2</b> Use variables to save typing</a></li>
<li class="chapter" data-level="3.1.3" data-path="visualize.html"><a href="visualize.html#basic-descriptive-statistics"><i class="fa fa-check"></i><b>3.1.3</b> Basic descriptive statistics</a></li>
<li class="chapter" data-level="3.1.4" data-path="visualize.html"><a href="visualize.html#r-as-a-calculator"><i class="fa fa-check"></i><b>3.1.4</b> R as a calculator</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visualize.html"><a href="visualize.html#histograms"><i class="fa fa-check"></i><b>3.2</b> Histograms</a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualize.html"><a href="visualize.html#basic-formatting"><i class="fa fa-check"></i><b>3.2.1</b> Basic formatting</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualize.html"><a href="visualize.html#getting-help"><i class="fa fa-check"></i><b>3.2.2</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="visualize.html"><a href="visualize.html#going-beyond"><i class="fa fa-check"></i><b>3.3</b> Going beyond</a><ul>
<li class="chapter" data-level="3.3.1" data-path="visualize.html"><a href="visualize.html#density-instead-of-frequency"><i class="fa fa-check"></i><b>3.3.1</b> Density instead of frequency</a></li>
<li class="chapter" data-level="3.3.2" data-path="visualize.html"><a href="visualize.html#adding-a-kernel-density-line"><i class="fa fa-check"></i><b>3.3.2</b> Adding a kernel density line</a></li>
<li class="chapter" data-level="3.3.3" data-path="visualize.html"><a href="visualize.html#adding-a-rug"><i class="fa fa-check"></i><b>3.3.3</b> Adding a rug</a></li>
<li class="chapter" data-level="3.3.4" data-path="visualize.html"><a href="visualize.html#relative-frequency-more-advanced"><i class="fa fa-check"></i><b>3.3.4</b> Relative frequency (more advanced)</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="visualize.html"><a href="visualize.html#using-ggplot"><i class="fa fa-check"></i><b>3.4</b> Using ggplot</a></li>
<li class="chapter" data-level="3.5" data-path="visualize.html"><a href="visualize.html#creating-a-box-plot"><i class="fa fa-check"></i><b>3.5</b> Creating a box plot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>4</b> Filtering Data</a><ul>
<li class="chapter" data-level="4.1" data-path="filter.html"><a href="filter.html#preliminaries-2"><i class="fa fa-check"></i><b>4.1</b> Preliminaries</a><ul>
<li class="chapter" data-level="4.1.1" data-path="filter.html"><a href="filter.html#import-data"><i class="fa fa-check"></i><b>4.1.1</b> Import data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="filter.html"><a href="filter.html#filters"><i class="fa fa-check"></i><b>4.2</b> Filters</a><ul>
<li class="chapter" data-level="4.2.1" data-path="filter.html"><a href="filter.html#using-a-logical-critereon"><i class="fa fa-check"></i><b>4.2.1</b> Using a logical critereon</a></li>
<li class="chapter" data-level="4.2.2" data-path="filter.html"><a href="filter.html#filtering-using-a-list"><i class="fa fa-check"></i><b>4.2.2</b> Filtering Using a List</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="filter.html"><a href="filter.html#syntatic-sugar"><i class="fa fa-check"></i><b>4.3</b> Syntatic sugar</a><ul>
<li class="chapter" data-level="4.3.1" data-path="filter.html"><a href="filter.html#membership"><i class="fa fa-check"></i><b>4.3.1</b> Membership</a></li>
<li class="chapter" data-level="4.3.2" data-path="filter.html"><a href="filter.html#pipes"><i class="fa fa-check"></i><b>4.3.2</b> Pipes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="recode.html"><a href="recode.html"><i class="fa fa-check"></i><b>5</b> Recoding Data</a><ul>
<li class="chapter" data-level="5.1" data-path="recode.html"><a href="recode.html#preliminaries-3"><i class="fa fa-check"></i><b>5.1</b> Preliminaries</a></li>
<li class="chapter" data-level="5.2" data-path="recode.html"><a href="recode.html#recode-a-text-column-to-a-dummy"><i class="fa fa-check"></i><b>5.2</b> Recode a Text Column to a Dummy</a></li>
<li class="chapter" data-level="5.3" data-path="recode.html"><a href="recode.html#recode-according-to-list-membership"><i class="fa fa-check"></i><b>5.3</b> Recode According to List Membership</a></li>
<li class="chapter" data-level="5.4" data-path="recode.html"><a href="recode.html#using-the-tidyverse"><i class="fa fa-check"></i><b>5.4</b> Using the tidyverse</a><ul>
<li class="chapter" data-level="5.4.1" data-path="recode.html"><a href="recode.html#mutate-basics"><i class="fa fa-check"></i><b>5.4.1</b> Mutate basics</a></li>
<li class="chapter" data-level="5.4.2" data-path="recode.html"><a href="recode.html#recoding-categorical-data"><i class="fa fa-check"></i><b>5.4.2</b> Recoding categorical data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ttest.html"><a href="ttest.html"><i class="fa fa-check"></i><b>6</b> Gap Analysis Using t-Tests</a><ul>
<li class="chapter" data-level="6.1" data-path="ttest.html"><a href="ttest.html#import-the-data-into-r-studio-1"><i class="fa fa-check"></i><b>6.1</b> Import the data into R Studio</a></li>
<li class="chapter" data-level="6.2" data-path="ttest.html"><a href="ttest.html#visual-gap-analysis"><i class="fa fa-check"></i><b>6.2</b> Visual gap analysis</a><ul>
<li class="chapter" data-level="6.2.1" data-path="ttest.html"><a href="ttest.html#boxplots-in-ggplot"><i class="fa fa-check"></i><b>6.2.1</b> Boxplots in ggplot</a></li>
<li class="chapter" data-level="6.2.2" data-path="ttest.html"><a href="ttest.html#boxplots-in-base-r-and-formula-notation"><i class="fa fa-check"></i><b>6.2.2</b> Boxplots in base R (and formula notation)</a></li>
<li class="chapter" data-level="6.2.3" data-path="ttest.html"><a href="ttest.html#histograms-1"><i class="fa fa-check"></i><b>6.2.3</b> Histograms</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="ttest.html"><a href="ttest.html#t-test"><i class="fa fa-check"></i><b>6.3</b> <em>t</em>-test</a><ul>
<li class="chapter" data-level="6.3.1" data-path="ttest.html"><a href="ttest.html#columns-or-formulas"><i class="fa fa-check"></i><b>6.3.1</b> Columns or formulas?</a></li>
<li class="chapter" data-level="6.3.2" data-path="ttest.html"><a href="ttest.html#equality-of-variance-test-columns"><i class="fa fa-check"></i><b>6.3.2</b> Equality of variance test (columns)</a></li>
<li class="chapter" data-level="6.3.3" data-path="ttest.html"><a href="ttest.html#equality-of-variance-test-pivoted-columns"><i class="fa fa-check"></i><b>6.3.3</b> Equality of variance test (pivoted columns)</a></li>
<li class="chapter" data-level="6.3.4" data-path="ttest.html"><a href="ttest.html#equality-of-variance-test-formula"><i class="fa fa-check"></i><b>6.3.4</b> Equality of variance test (formula)</a></li>
<li class="chapter" data-level="6.3.5" data-path="ttest.html"><a href="ttest.html#unequal-variance-t-test"><i class="fa fa-check"></i><b>6.3.5</b> Unequal variance <em>t</em>-test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="categorical.html"><a href="categorical.html"><i class="fa fa-check"></i><b>7</b> Gap Analysis with Categorical Variables</a><ul>
<li class="chapter" data-level="7.1" data-path="categorical.html"><a href="categorical.html#categorical-variables"><i class="fa fa-check"></i><b>7.1</b> Categorical Variables</a><ul>
<li class="chapter" data-level="7.1.1" data-path="categorical.html"><a href="categorical.html#preliminaries-4"><i class="fa fa-check"></i><b>7.1.1</b> Preliminaries</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="categorical.html"><a href="categorical.html#tables-in-r"><i class="fa fa-check"></i><b>7.2</b> Tables in R</a><ul>
<li class="chapter" data-level="7.2.1" data-path="categorical.html"><a href="categorical.html#simple-table"><i class="fa fa-check"></i><b>7.2.1</b> Simple Table</a></li>
<li class="chapter" data-level="7.2.2" data-path="categorical.html"><a href="categorical.html#frequency-verus-proportions"><i class="fa fa-check"></i><b>7.2.2</b> Frequency Verus Proportions</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="categorical.html"><a href="categorical.html#contingency-tables"><i class="fa fa-check"></i><b>7.3</b> Contingency Tables</a><ul>
<li class="chapter" data-level="7.3.1" data-path="categorical.html"><a href="categorical.html#using-gmodels"><i class="fa fa-check"></i><b>7.3.1</b> Using gmodels</a></li>
<li class="chapter" data-level="7.3.2" data-path="categorical.html"><a href="categorical.html#using-gmodels-crosstable-command"><i class="fa fa-check"></i><b>7.3.2</b> Using gmodel’s CrossTable Command</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>8</b> Correlation and Scatterplots</a><ul>
<li class="chapter" data-level="8.1" data-path="correlation.html"><a href="correlation.html#data-1"><i class="fa fa-check"></i><b>8.1</b> Data</a></li>
<li class="chapter" data-level="8.2" data-path="correlation.html"><a href="correlation.html#scatterplots"><i class="fa fa-check"></i><b>8.2</b> Scatterplots</a></li>
<li class="chapter" data-level="8.3" data-path="correlation.html"><a href="correlation.html#coefficient-of-correlation"><i class="fa fa-check"></i><b>8.3</b> Coefficient of correlation</a><ul>
<li class="chapter" data-level="8.3.1" data-path="correlation.html"><a href="correlation.html#simple-correlation"><i class="fa fa-check"></i><b>8.3.1</b> Simple correlation</a></li>
<li class="chapter" data-level="8.3.2" data-path="correlation.html"><a href="correlation.html#correlation-matrix"><i class="fa fa-check"></i><b>8.3.2</b> Correlation matrix</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>9</b> Simple Linear Regression</a><ul>
<li class="chapter" data-level="9.1" data-path="regression.html"><a href="regression.html#linear-regression"><i class="fa fa-check"></i><b>9.1</b> Linear Regression</a><ul>
<li class="chapter" data-level="9.1.1" data-path="regression.html"><a href="regression.html#review-of-the-basics"><i class="fa fa-check"></i><b>9.1.1</b> Review of the basics</a></li>
<li class="chapter" data-level="9.1.2" data-path="regression.html"><a href="regression.html#formula-notation"><i class="fa fa-check"></i><b>9.1.2</b> Formula notation</a></li>
<li class="chapter" data-level="9.1.3" data-path="regression.html"><a href="regression.html#model-quality-and-statistical-significance"><i class="fa fa-check"></i><b>9.1.3</b> Model quality and statistical significance</a></li>
<li class="chapter" data-level="9.1.4" data-path="regression.html"><a href="regression.html#interpretation"><i class="fa fa-check"></i><b>9.1.4</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="regression.html"><a href="regression.html#regression-diagnostics"><i class="fa fa-check"></i><b>9.2</b> Regression diagnostics</a><ul>
<li class="chapter" data-level="9.2.1" data-path="regression.html"><a href="regression.html#plots-in-base-r"><i class="fa fa-check"></i><b>9.2.1</b> Plots in base R</a></li>
<li class="chapter" data-level="9.2.2" data-path="regression.html"><a href="regression.html#ggplot-data"><i class="fa fa-check"></i><b>9.2.2</b> ggplot data</a></li>
<li class="chapter" data-level="9.2.3" data-path="regression.html"><a href="regression.html#ggplot-histogram"><i class="fa fa-check"></i><b>9.2.3</b> ggplot histogram</a></li>
<li class="chapter" data-level="9.2.4" data-path="regression.html"><a href="regression.html#ggplot-predicted-versus-actuals"><i class="fa fa-check"></i><b>9.2.4</b> ggplot predicted versus actuals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="multiregression.html"><a href="multiregression.html"><i class="fa fa-check"></i><b>10</b> Multiple Linear Regression</a><ul>
<li class="chapter" data-level="10.1" data-path="multiregression.html"><a href="multiregression.html#kitchen-sink-model"><i class="fa fa-check"></i><b>10.1</b> Kitchen sink model</a></li>
<li class="chapter" data-level="10.2" data-path="multiregression.html"><a href="multiregression.html#categorical-explanatory-variables"><i class="fa fa-check"></i><b>10.2</b> Categorical explanatory variables</a></li>
<li class="chapter" data-level="10.3" data-path="multiregression.html"><a href="multiregression.html#checking-for-colinearity"><i class="fa fa-check"></i><b>10.3</b> Checking for colinearity</a><ul>
<li class="chapter" data-level="10.3.1" data-path="multiregression.html"><a href="multiregression.html#scatterplot-matrix"><i class="fa fa-check"></i><b>10.3.1</b> Scatterplot matrix</a></li>
<li class="chapter" data-level="10.3.2" data-path="multiregression.html"><a href="multiregression.html#correlation-matrix-1"><i class="fa fa-check"></i><b>10.3.2</b> Correlation matrix</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="multiregression.html"><a href="multiregression.html#model-refinement"><i class="fa fa-check"></i><b>10.4</b> Model refinement</a><ul>
<li class="chapter" data-level="10.4.1" data-path="multiregression.html"><a href="multiregression.html#manual-stepwise-refinement"><i class="fa fa-check"></i><b>10.4.1</b> Manual stepwise refinement</a></li>
<li class="chapter" data-level="10.4.2" data-path="multiregression.html"><a href="multiregression.html#automated-stepwise-refinement"><i class="fa fa-check"></i><b>10.4.2</b> Automated stepwise refinement</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="multiregression.html"><a href="multiregression.html#regression-diagnostics-1"><i class="fa fa-check"></i><b>10.5</b> Regression diagnostics</a></li>
<li class="chapter" data-level="10.6" data-path="multiregression.html"><a href="multiregression.html#standardized-regression-coefficients"><i class="fa fa-check"></i><b>10.6</b> Standardized regression coefficients</a><ul>
<li class="chapter" data-level="10.6.1" data-path="multiregression.html"><a href="multiregression.html#extracting-betas"><i class="fa fa-check"></i><b>10.6.1</b> Extracting betas</a></li>
<li class="chapter" data-level="10.6.2" data-path="multiregression.html"><a href="multiregression.html#tornado-diagram"><i class="fa fa-check"></i><b>10.6.2</b> Tornado diagram</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Basic Analytics in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ttest" class="section level1">
<h1><span class="header-section-number">Lesson 6</span> Gap Analysis Using t-Tests</h1>
<p>Here we are going to explore basic Gap Analysis in R. It shows different types of graphical gap analysis and concludes with the <em>t</em>-test.</p>
<p>Recall that the task is to determine whether there is a significant difference between the salaries of male and female employees at the bank. We can thus think of this as two samples of continuous data:</p>
<ul>
<li>salaries for males</li>
<li>salaries for females</li>
</ul>
<p>The <em>null hypothesis</em> is that both samples come from the same population. Translated, this means that we are testing the assumption that men and women are paid the same in the organization.</p>
<div id="import-the-data-into-r-studio-1" class="section level2">
<h2><span class="header-section-number">6.1</span> Import the data into R Studio</h2>
<p>By this point, I assume you recall how to get data into the RStudio environment. See the <a href="./data.html">data tutorial</a> for a reminder.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb56-2" title="2">Bank &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;Data/Bank.csv&quot;</span>)</a></code></pre></div>
</div>
<div id="visual-gap-analysis" class="section level2">
<h2><span class="header-section-number">6.2</span> Visual gap analysis</h2>
<div id="boxplots-in-ggplot" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Boxplots in ggplot</h3>
<p>Recall in Lesson <a href="visualize.html#visualize">3</a> that the ggplot version of boxplot expects two axes: a measure (like Salary) and a grouping variable (like Gender). Creating a comparative boxplot is thus extremely simple in ggplot:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1">  <span class="kw">ggplot</span>(<span class="dt">data=</span>Bank) <span class="op">+</span></a>
<a class="sourceLine" id="cb57-2" title="2"><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Gender, <span class="dt">y=</span>Salary))</a></code></pre></div>
<p><img src="06_t-test_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>If you are going to include the graphic in a report, you should add a title. You can also make it horizontal using the <code>coord_flip</code> function (which flips the coordinate system in ggplot):</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">  <span class="kw">ggplot</span>(<span class="dt">data=</span>Bank) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-2" title="2"><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Gender, <span class="dt">y=</span>Salary)) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-3" title="3"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Distribution of Salaries&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-4" title="4"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Salary ($K)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-5" title="5"><span class="st">    </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="06_t-test_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="boxplots-in-base-r-and-formula-notation" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Boxplots in base R (and formula notation)</h3>
<p>We can accomplish much the same thing in base R—that is, without using the ggplot2 package. The key is R’s “formula” notation, which we will see in other, non-graphical contexts. The format of a formula in R is: <code>Y ~ X</code> This can be read as: “Y is a function of X”. The notation defines a relationship between the variables that certain functions can understand.</p>
<p>To illustrate, consider the case here: We are trying to understand if Salary depends on Gender. We can write this (hypothesized) relationship as <code>Salary ~ Gender</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="kw">boxplot</span>(Salary <span class="op">~</span><span class="st"> </span>Gender, Bank)</a></code></pre></div>
<p><img src="06_t-test_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Here we call the <code>boxplot</code> function with two arguments: the formula followed by the source data (our Bank tibble). R reads the formula and understands we want to see how Salary varies with the different values of Gender.</p>
<p>As an aside, you may be wondering why I used the <code>data=Bank</code> argument rather than a pipe. The following does not work in R because the boxplot function is part of base R, not the tidyverse. Pipes only work in the tidyverse, not all parts of R.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">  Bank <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">boxplot</span>(Salary <span class="op">~</span><span class="st"> </span>Gender) <span class="co">## does not work</span></a></code></pre></div>
</div>
<div id="histograms-1" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Histograms</h3>
<p>Comparative histograms in base R are possible, but very complex. In contrast, ggplot allows us to extend our basic histogram (recall the <a href="visualize">visualization tutorial</a>) with <em>facets</em>. To illustrate, recall the basic histogram for all bank employees:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1">  <span class="kw">ggplot</span>(<span class="dt">data=</span>Bank) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-2" title="2"><span class="st">    </span><span class="kw">geom_histogram</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Salary, <span class="dt">y=</span>..count..<span class="op">/</span><span class="kw">sum</span>(..count..)<span class="op">*</span><span class="st"> </span><span class="dv">100</span>), <span class="dt">bins=</span><span class="dv">10</span>, <span class="dt">fill=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-3" title="3"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Distribution of Salaries&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-4" title="4"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Salary ($K)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-5" title="5"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Percent&quot;</span>)</a></code></pre></div>
<p><img src="06_t-test_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>To this we can add a facet with two arguments: The formula argument says “as a function of Gender” and the number of rows argument allows us to stack the histograms, as in SAS:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">  <span class="kw">ggplot</span>(<span class="dt">data=</span>Bank) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-2" title="2"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Salary, <span class="dt">y=</span>..density..), <span class="dt">bins=</span><span class="dv">10</span>, <span class="dt">fill=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-3" title="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Distribution of Salaries&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-4" title="4"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Salary ($K)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-5" title="5"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Percent&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-6" title="6"><span class="st">  </span><span class="kw">facet_wrap</span>( <span class="op">~</span><span class="st"> </span>Gender, <span class="dt">nrow=</span><span class="dv">2</span>)</a></code></pre></div>
<p><img src="06_t-test_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>The result is two histograms: one for males and the other for females. Naturally, for this to work, the “as a function of” variable has to be discrete (like Gender).</p>
<p>Can the formula be more complex? Yes. We can look at the distribution of Salary as a function of Gender and PCJob (the other discrete variable in the Bank tibble) by writing the formula as <code>Y ~ Gender + PCJob</code>. Note that we get a salary histogram for each combination of the two variables. One quadrant is missing because, apparently, there are no males with PC jobs in this bank:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data=</span>Bank) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-2" title="2"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Salary, <span class="dt">y=</span>..count..<span class="op">/</span><span class="kw">sum</span>(..count..)<span class="op">*</span><span class="dv">100</span>), <span class="dt">bins=</span><span class="dv">10</span>, <span class="dt">fill=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-3" title="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Distribution of Salaries&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-4" title="4"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Salary ($K)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-5" title="5"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Percent&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-6" title="6"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>Gender <span class="op">+</span><span class="st"> </span>PCJob, <span class="dt">nrow=</span><span class="dv">2</span>)</a></code></pre></div>
<p><img src="06_t-test_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
</div>
<div id="t-test" class="section level2">
<h2><span class="header-section-number">6.3</span> <em>t</em>-test</h2>
<p>As always, there is a slight difference in the <em>t</em>-test arithmetic depending on whether we assume the two samples have equal variance. SAS Enterprise Guide runs both versions of the <em>t</em>-test and includes the equality of variance test so you know which version to use. R is a bit more like Excel: you have to run your own equality of variance test and then, based on the result, select the correct version of the <em>t</em>-test to run.</p>
<div id="columns-or-formulas" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Columns or formulas?</h3>
<p>Before getting into the equality of variance test, it is worth reviewing the difference between stacked and unstacked data.</p>
<p>Recall that stacked (or “long” or “tidy”) data has a single column for Salary. This is the format in which we most often get data from databases and business software.</p>
<p><img src="graphics/stacked_data.png" /></p>
<p>If the data is unstacked (or “pivoted” or converted to “wide data”), we get a Salary column for each value of Gender:</p>
<p><img src="graphics/unstacked_data.png" /></p>
<p>R and the tidyverse include tools for <em>reshaping</em> data. The <code>spread</code> function is similar to using a pivot table in Excel to make wide data; the <code>gather</code> function does something Excel cannot do: un-pivot data back into long format.</p>
<p>Which data shape is better? Excel’s Analysis TookPak uses unstacked/pivoted data for most comparisons. This makes sense to most people: You start with two columns of data (salary for females and salary for males) and you run tests that compare the two columns. This approach is a lot of work, but it is conceptually simple.</p>
</div>
<div id="equality-of-variance-test-columns" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Equality of variance test (columns)</h3>
<p>Let’s start with the simplest (but least elegant approach):</p>
<ol style="list-style-type: decimal">
<li>Create two new tibbles: Bank.female and Bank.male. These are copies of the original Bank tibble in which male and females have been filtered out.</li>
<li>Run the equality of variance test on the Salary columns from the two different tibbles.</li>
</ol>
<p>First, the new tibbles:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1">  Bank.male &lt;-<span class="st"> </span>Bank <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Gender<span class="op">==</span><span class="st">&quot;Male&quot;</span>)</a>
<a class="sourceLine" id="cb64-2" title="2">  Bank.female &lt;-<span class="st"> </span>Bank <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Gender<span class="op">==</span><span class="st">&quot;Female&quot;</span>)</a></code></pre></div>
<p>Note that this works just as well without pipes <code>%&gt;%</code>. You simply need include the data source as the first argument in <code>filter</code>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">  Bank.male &lt;-<span class="st"> </span><span class="kw">filter</span>(Bank, Gender<span class="op">==</span><span class="st">&quot;Male&quot;</span>)</a>
<a class="sourceLine" id="cb65-2" title="2">  Bank.female &lt;-<span class="st"> </span><span class="kw">filter</span>(Bank, Gender<span class="op">==</span><span class="st">&quot;Female&quot;</span>)</a></code></pre></div>
<p>Now, we can run the equality of variance test:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1">  <span class="kw">var.test</span>(Bank.female<span class="op">$</span>Salary, Bank.male<span class="op">$</span>Salary)</a></code></pre></div>
<pre><code>## 
##  F test to compare two variances
## 
## data:  Bank.female$Salary and Bank.male$Salary
## F = 0.17942, num df = 139, denom df = 67, p-value &lt; 2.2e-16
## alternative hypothesis: true ratio of variances is not equal to 1
## 95 percent confidence interval:
##  0.1166790 0.2676276
## sample estimates:
## ratio of variances 
##          0.1794198</code></pre>
<p>All we are interested in from this output is whether the two variances are equal. The <em>null hypothesis</em> in this test is that the variances are equal. Thus, the small <em>p</em>-value (2.2e-16)—the probability that the null hypothesis is true—suggest they are <em>unequal</em>.</p>
</div>
<div id="equality-of-variance-test-pivoted-columns" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Equality of variance test (pivoted columns)</h3>
<p>The idea of splitting the Bank data into separate female and male tibbles hopefully strikes you as a bit inelegant. In Excel, we used a pivot table to sidestep the need to copy and filter data. We can do the same here using the <code>spread</code> function:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">  Bank.gender &lt;-<span class="st"> </span>Bank <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">spread</span>(<span class="dt">key=</span>Gender, <span class="dt">value=</span>Salary)</a>
<a class="sourceLine" id="cb68-2" title="2">  <span class="kw">View</span>(Bank.gender)  <span class="co">## examine the pivoted result</span></a>
<a class="sourceLine" id="cb68-3" title="3">  <span class="kw">var.test</span>(Bank.gender<span class="op">$</span>Female, Bank.gender<span class="op">$</span>Male)</a></code></pre></div>
<pre><code>## 
##  F test to compare two variances
## 
## data:  Bank.gender$Female and Bank.gender$Male
## F = 0.17942, num df = 139, denom df = 67, p-value &lt; 2.2e-16
## alternative hypothesis: true ratio of variances is not equal to 1
## 95 percent confidence interval:
##  0.1166790 0.2676276
## sample estimates:
## ratio of variances 
##          0.1794198</code></pre>
</div>
<div id="equality-of-variance-test-formula" class="section level3">
<h3><span class="header-section-number">6.3.4</span> Equality of variance test (formula)</h3>
<p>Pivoting the data before comparing columns is a bit better, but we still had to create an entirely new tibble (“Bank.gender”") with separate Female and Male salary columns. Fortunately, the <em>formula</em> notation discussed previously allows us to use stacked data without any requirement to extract separate columns for females and males.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">  <span class="kw">var.test</span>(Salary <span class="op">~</span><span class="st"> </span>Gender, Bank)</a></code></pre></div>
<pre><code>## 
##  F test to compare two variances
## 
## data:  Salary by Gender
## F = 0.17942, num df = 139, denom df = 67, p-value &lt; 2.2e-16
## alternative hypothesis: true ratio of variances is not equal to 1
## 95 percent confidence interval:
##  0.1166790 0.2676276
## sample estimates:
## ratio of variances 
##          0.1794198</code></pre>
<p>Again, the formula “Salary as a function of Gender” is the first argument and the source data is the second argument. As we see, the result is identical to the previous two tests, but with much less work. The formula tells R to split Salary according to the two different values for Gender in the data set. This is similar to the “Classification variable” in SAS Enterprise Guide.</p>
<p>If we had more than two values for Gender, we would have to use a different statistical technique (such as ANOVA).</p>
</div>
<div id="unequal-variance-t-test" class="section level3">
<h3><span class="header-section-number">6.3.5</span> Unequal variance <em>t</em>-test</h3>
<p>We are now ready to move onto the main event. The only reason we care whether the variances of male and female salaries are equal is to know which version of the <em>t</em>-test to run. In this case, the small probability that the variances are equal leads us to the conclusion that the variances are unequal. We pass this information along to the <code>t.test</code> function using the <code>var.equal</code> argument:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1"><span class="kw">t.test</span>(Salary <span class="op">~</span><span class="st"> </span>Gender, Bank, <span class="dt">var.equal=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  Salary by Gender
## t = -4.141, df = 78.898, p-value = 8.604e-05
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -12.282943  -4.308082
## sample estimates:
## mean in group Female   mean in group Male 
##             37.20993             45.50544</code></pre>
<p>The <em>p</em>-value (the probability the sample means are the same) is small (8.604e-05). In addition, R gives us the very useful confidence interval around the difference of the two means. So we are 95% certain that we pay women somewhere between 12K and 4.3K less than men.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="recode.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="categorical.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
